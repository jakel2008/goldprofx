# -*- coding: utf-8 -*-
"""
ูุธุงู ุงูุชุญููู ุงูุนููู ุงููุณุชูุฑ - ูู 5 ุฏูุงุฆู
ูุนูู 24/7 ูุชุญููู ุฌููุน ุงูุฃุตูู ุงููุงููุฉ ุจุดูู ุนููู ููุณุชูุฑ
"""

import os
import time
import schedule
from datetime import datetime
from auto_pairs_analyzer import run_daily_analysis

os.system('chcp 65001 > nul')

def deep_analysis_job():
    """ูุธููุฉ ุงูุชุญููู ุงูุนููู ุงููุฌุฏููุฉ"""
    print(f"\n{'='*70}")
    print(f"๐ ุจุฏุก ุงูุชุญููู ุงูุนููู - {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    print(f"{'='*70}\n")
    
    try:
        run_daily_analysis()
        print(f"\nโ ุชู ุงูุชุญููู ุจูุฌุงุญ - ุงูุชุงูู ุจุนุฏ 5 ุฏูุงุฆู\n")
    except Exception as e:
        print(f"\nโ ุฎุทุฃ ูู ุงูุชุญููู: {e}\n")

def main():
    """ุงูุจุฑูุงูุฌ ุงูุฑุฆูุณู"""
    print("""
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                                                            โ
โ        ๐ฌ ูุธุงู ุงูุชุญููู ุงูุนููู ุงููุณุชูุฑ - 5 ุฏูุงุฆู          โ
โ                                                            โ
โ  ๐ ูุญูู 22 ุฃุตู ูุงูู ุจุดูู ุนููู ูู 5 ุฏูุงุฆู               โ
โ  ๐ฏ ููุงุชุฑ ูุชุนุฏุฏุฉ ููุญุตูู ุนูู ุฃูุถู ุงูุฅุดุงุฑุงุช                โ
โ  ๐ก ุจุซ ุชููุงุฆู ููุฅุดุงุฑุงุช ุนุงููุฉ ุงูุฌูุฏุฉ                       โ
โ  โก ุชุญุฏูุซุงุช ูุณุชูุฑุฉ 24/7                                   โ
โ                                                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    """)
    
    print("๐ ุจุฏุก ูุธุงู ุงูุชุญููู ุงูุนููู...\n")
    
    # ุฌุฏููุฉ ุงูุชุญููู ูู 5 ุฏูุงุฆู
    schedule.every(5).minutes.do(deep_analysis_job)
    
    # ุชูููุฐ ุงูุชุญููู ุงูุฃูู ููุฑุงู
    print("โก ุชูููุฐ ุงูุชุญููู ุงูุฃูู ุงูุขู...\n")
    deep_analysis_job()
    
    print("\nโ ุชู ุฌุฏููุฉ ุงูุชุญููู ุงูุนููู ูู 5 ุฏูุงุฆู")
    print("๐ ุงููุธุงู ูุนูู ุงูุขู... ุงุถุบุท Ctrl+C ููุฅููุงู\n")
    
    # ุญููุฉ ูุง ููุงุฆูุฉ ูุชุดุบูู ุงูููุงู ุงููุฌุฏููุฉ
    try:
        while True:
            schedule.run_pending()
            time.sleep(30)  # ูุญุต ูู 30 ุซุงููุฉ
            
    except KeyboardInterrupt:
        print("\n\nโน๏ธ  ุชู ุฅููุงู ูุธุงู ุงูุชุญููู ุงูุนููู")
        print(f"๐ ููุช ุงูุฅููุงู: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")

if __name__ == "__main__":
    main()
