{% extends "base.html" %}

{% block content %}
<div class="signals-section">
    <h2>๐ณ ุฎุทุท ุงูุงุดุชุฑุงู</h2>
    
    <div class="plans-grid">
        <div class="plan-card" data-plan="free">
            <div class="plan-name">ูุฌุงูู</div>
            <div class="plan-price">0 $</div>
            <ul class="plan-features">
                <li>โ 5 ุฅุดุงุฑุงุช ููููุฉ</li>
                <li>โ ุฅุดุงุฑุงุช ุนุงููุฉ ุงูุฌูุฏุฉ ููุท (75%+)</li>
                <li>โ ุนูู ุฃุทุฑ ุฒูููุฉ ูุญุฏุฏุฉ</li>
                <li>โ ุจุฏูู ุชุญููู ูุชูุฏู</li>
                <li>โ ุจุฏูู ุฏุนู ุฃููููุฉ</li>
            </ul>
            <button class="btn btn-primary plan-btn" disabled>ูุดุชุฑู ุจุงููุนู</button>
        </div>
        
        <div class="plan-card" data-plan="bronze">
            <div class="plan-name">ุจุฑููุฒู</div>
            <div class="plan-price">$9/ุงูุดูุฑ</div>
            <ul class="plan-features">
                <li>โ 15 ุฅุดุงุฑุฉ ููููุฉ</li>
                <li>โ ุฌูุฏุฉ ุนุงููุฉ ููุชูุณุทุฉ (50%+)</li>
                <li>โ ุชุญููู 1H ู 5M</li>
                <li>โ ุฃุฒูุงุฌ ููุฑูุณ ุฑุฆูุณูุฉ</li>
                <li>โ ุจุฏูู ุฏุนู ุฃููููุฉ</li>
            </ul>
            <button class="btn btn-primary plan-btn">ุชุฑููุฉ ุงูุฎุทุฉ</button>
        </div>
        
        <div class="plan-card popular" data-plan="silver">
            <div class="plan-name">๐ ูุถู</div>
            <div class="plan-price">$29/ุงูุดูุฑ</div>
            <ul class="plan-features">
                <li>โ 30 ุฅุดุงุฑุฉ ููููุฉ</li>
                <li>โ ุฌููุน ูุณุชููุงุช ุงูุฌูุฏุฉ</li>
                <li>โ ุชุญููู ูุชูุฏู (15 ุฏูููุฉ ู ุณุงุนุฉ)</li>
                <li>โ ุฌููุน ุงูุฃุฒูุงุฌ ูุงููุนุงุฏู</li>
                <li>โ ุฏุนู ุฃููููุฉ</li>
            </ul>
            <button class="btn btn-primary plan-btn">ุชุฑููุฉ ุงูุฎุทุฉ</button>
        </div>
        
        <div class="plan-card" data-plan="gold">
            <div class="plan-name">ุฐูุจู VIP</div>
            <div class="plan-price">$99/ุงูุดูุฑ</div>
            <ul class="plan-features">
                <li>โ ุฅุดุงุฑุงุช ุบูุฑ ูุญุฏูุฏุฉ</li>
                <li>โ ุฌููุน ูุณุชููุงุช ุงูุฌูุฏุฉ</li>
                <li>โ ุชุญููู ุดุงูู ุนูู ุฌููุน ุงูุฃุทุฑ</li>
                <li>โ ุฌููุน ุงูุฃุฒูุงุฌ ูุงูุนููุงุช ูุงููุนุงุฏู</li>
                <li>โ ุฏุนู VIP 24/7 + ุงุณุชุดุงุฑุงุช</li>
            </ul>
            <button class="btn btn-primary plan-btn">ุชุฑููุฉ ุงูุฎุทุฉ</button>
        </div>
    </div>
    
    <div style="margin-top: 3rem; padding: 2rem; background: #f8f9fa; border-radius: 10px; text-align: center;">
        <h3>๐ฏ ุงูููุงุฑูุฉ ุงูุชูุตูููุฉ</h3>
        <table style="width: 100%; margin-top: 1rem; text-align: right;">
            <thead>
                <tr style="background: #667eea; color: white;">
                    <th style="padding: 1rem;">ุงูููุฒุฉ</th>
                    <th style="padding: 1rem;">ูุฌุงูู</th>
                    <th style="padding: 1rem;">ุจุฑููุฒู</th>
                    <th style="padding: 1rem;">ูุถู</th>
                    <th style="padding: 1rem;">ุฐูุจู</th>
                </tr>
            </thead>
            <tbody>
                <tr style="border-bottom: 1px solid #e9ecef;">
                    <td style="padding: 1rem;">ุงูุฅุดุงุฑุงุช ููููุงู</td>
                    <td>5</td>
                    <td>15</td>
                    <td>30</td>
                    <td>โ</td>
                </tr>
                <tr style="border-bottom: 1px solid #e9ecef;">
                    <td style="padding: 1rem;">ุงูุญุฏ ุงูุฃุฏูู ููุฌูุฏุฉ</td>
                    <td>75%</td>
                    <td>50%</td>
                    <td>ูู ุงููุณุชููุงุช</td>
                    <td>ูู ุงููุณุชููุงุช</td>
                </tr>
                <tr style="border-bottom: 1px solid #e9ecef;">
                    <td style="padding: 1rem;">ุนุฏุฏ ุงูุฃุฒูุงุฌ</td>
                    <td>ูุญุฏูุฏ</td>
                    <td>ุฃุณุงุณู</td>
                    <td>ุดุงูู</td>
                    <td>ูุงูู</td>
                </tr>
                <tr>
                    <td style="padding: 1rem;">ุงูุฏุนู</td>
                    <td>-</td>
                    <td>-</td>
                    <td>ุฃููููุฉ</td>
                    <td>VIP 24/7</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</div>

<script>
// ููุงูู ุงุดุชุฑุงู ุงูุฎุทุท
document.addEventListener('DOMContentLoaded', async () => {
    const buttons = document.querySelectorAll('.plan-btn');
    let currentUser = null;

    try {
        const res = await fetch('/api/user');
        if (res.ok) {
            currentUser = await res.json();
        }
    } catch (e) { /* ignore */ }

    buttons.forEach((btn) => {
        btn.addEventListener('click', async () => {
            const card = btn.closest('.plan-card');
            const plan = card?.getAttribute('data-plan');
            if (!plan) return;

            // ุฅุฐุง ูู ููู ุงููุณุชุฎุฏู ูุณุฌู ุงูุฏุฎููุ ุชูุฌูู ููุชุณุฌูู
            if (!currentUser || !currentUser.success) {
                const proceed = confirm('ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ููุงุดุชุฑุงู. ูู ุชุฑูุฏ ุงูุงูุชูุงู ูุตูุญุฉ ุงูุชุณุฌููุ');
                if (proceed) window.location.href = '/register';
                return;
            }

            // ุฅุฐุง ููุณ ุงูุฎุทุฉุ ุฅุนูุงู ุงููุณุชุฎุฏู
            if (currentUser.plan && currentUser.plan.toLowerCase() === plan.toLowerCase()) {
                alert('ุฃูุช ุจุงููุนู ุนูู ูุฐู ุงูุฎุทุฉ.');
                return;
            }

            // ุชูุฌูู ุฅูู ุตูุญุฉ ุงูุฏูุน
            window.location.href = `/payment_jordan/${plan}`;
        });
    });
});
</script>
{% endblock %}
