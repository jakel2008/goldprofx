# -*- coding: utf-8 -*-
"""
ุฌุฏููุฉ ุชุญุฏูุซ ุชููุงุฆู ูุญุงูุฉ ุงูุตููุงุช ูู 5 ุฏูุงุฆู
"""
import schedule
import time
from datetime import datetime
import os

def update_and_report():
    """ุชุญุฏูุซ ูุนุฑุถ ุงูุชูุฑูุฑ"""
    print(f"\n๐ ุชุญุฏูุซ ุชููุงุฆู - {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    print("=" * 80)
    
    # ุชุดุบูู ุงูุชุญุฏูุซ
    os.system('python track_signals_status.py')
    
    print("\nโฐ ุงูุฌุฏููุฉ ุงูุชุงููุฉ ุจุนุฏ 5 ุฏูุงุฆู...")

def run_scheduler():
    """ุชุดุบูู ุงูุฌุฏููุฉ"""
    print("โ" + "โ" * 78 + "โ")
    print("โ" + " ๐ค ูุธุงู ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูุญุงูุฉ ุงูุตููุงุช ".center(78) + "โ")
    print("โ" + "โ" * 78 + "โ")
    
    print("\nโ๏ธ ุงูุฅุนุฏุงุฏุงุช:")
    print("  โฑ๏ธ  ุงูุชุญุฏูุซ ูู: 5 ุฏูุงุฆู")
    print("  ๐ ููุญุต: ุงูุฃุณุนุงุฑ ุงูุญูุฉ ูู Yahoo Finance")
    print("  ๐ ูุญุฏุซ: ุญุงูุฉ ุงูุตููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช")
    print("  ๐ ูุนุฑุถ: ุชูุฑูุฑ ุดุงูู ุจุนุฏ ูู ุชุญุฏูุซ")
    
    # ุชุญุฏูุซ ููุฑู ุนูุฏ ุงูุจุฏุก
    print("\nโถ๏ธ  ุจุฏุก ุงูุชุญุฏูุซ ุงูููุฑู...")
    update_and_report()
    
    # ุฌุฏููุฉ ุงูุชุญุฏูุซ ูู 5 ุฏูุงุฆู
    schedule.every(5).minutes.do(update_and_report)
    
    print("\nโ ุงููุธุงู ูุนูู ุงูุขู...")
    print("โ๏ธ  ููุฅููุงู: ุงุถุบุท Ctrl+C\n")
    
    try:
        while True:
            schedule.run_pending()
            time.sleep(30)  # ูุญุต ูู 30 ุซุงููุฉ
    except KeyboardInterrupt:
        print("\n\nโน๏ธ  ุชู ุฅููุงู ุงููุธุงู ุจูุงุณุทุฉ ุงููุณุชุฎุฏู")
        print("โ ุฌููุน ุงูุชุญุฏูุซุงุช ูุญููุธุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช")

if __name__ == "__main__":
    run_scheduler()
